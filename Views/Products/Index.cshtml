@model IEnumerable<retail_app_tester.Models.Product>

@{
    ViewData["Title"] = "Products";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skincare Products</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #8a7fca;
            --secondary-color: #f8f6ff;
            --accent-color: #ff7eb5;
            --text-color: #33334d;
            --light-text: #6c6c7e;
            --card-shadow: 0 5px 15px rgba(138, 127, 202, 0.15);
        }
        
        body {
            background-color: #faf9fe;
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-top: 20px;
        }
        
        .header-container {
            background: linear-gradient(135deg, var(--primary-color), #6a5ac9);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }
        
        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            height: 100%;
            box-shadow: var(--card-shadow);
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(138, 127, 202, 0.25);
        }
        
        .image-container {
            height: 200px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary-color);
        }
        
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-brand {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .product-name {
            font-weight: 700;
            color: var(--text-color);
            line-height: 1.3;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            min-height: 2.6em;
        }
        
        .product-size {
            color: var(--light-text);
            font-size: 0.9rem;
        }
        
        .product-price {
            font-weight: 800;
            color: var(--primary-color);
            font-size: 1.2rem;
        }
        
        .stock-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 0.75rem;
            padding: 5px 10px;
            border-radius: 20px;
            z-index: 1;
        }
        
        .btn-add-to-cart {
            background-color: var(--accent-color);
            border: none;
            color: white;
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 8px;
            transition: background-color 0.2s;
            width: 100%;
        }
        
        .btn-add-to-cart:hover {
            background-color: #ff609f;
            color: white;
        }
        
        .btn-add-to-cart:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .btn-view-details {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            font-weight: 600;
            padding: 8px 15px;
            border-radius: 8px;
            transition: background-color 0.2s;
            width: 100%;
            text-decoration: none;
            display: block;
            text-align: center;
        }
        
        .btn-view-details:hover {
            background-color: #e8e4ff;
            color: var(--primary-color);
        }
        
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }
        
        .search-box input {
            border-radius: 20px;
            padding-left: 40px;
            border: 1px solid #ddd;
        }
        
        .search-box i {
            position: absolute;
            left: 15px;
            top: 12px;
            color: var(--light-text);
        }
        
        .card-body {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }
        
        .button-container {
            margin-top: auto;
            padding-top: 15px;
        }
        
        .no-products {
            text-align: center;
            padding: 40px;
            color: var(--light-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header-container text-center">
            <h1 class="display-5 fw-bold">Skincare Collection</h1>
            <p class="lead">Discover products for your perfect skincare routine</p>
        </div>

        <!-- Search and Create Button -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" class="form-control" placeholder="Search products...">
            </div>
            <a asp-action="Create" class="btn btn-primary">
                <i class="fas fa-plus-circle me-1"></i> Add New Product
            </a>
        </div>

        <!-- Product Grid -->
        @if (Model.Any())
        {
            <div class="row row-cols-1 row-cols-md-2 row-cols-xl-4 g-4">
                @foreach (var item in Model)
                {
                    <div class="col">
                        <div class="product-card">
                            <div class="position-relative">
                                <div class="image-container">
                                    @if (!string.IsNullOrEmpty(item.ImageURL))
                                    {
                                        <img src="@item.ImageURL" class="product-image" alt="@item.ProductName">
                                    }
                                    else
                                    {
                                        <img src="https://via.placeholder.com/300x200/f8f6ff/8a7fca?text=No+Image" class="product-image" alt="No image available">
                                    }
                                </div>
                                @if (item.StockQuantity > 0)
                                {
                                    <span class="stock-badge bg-success">In Stock</span>
                                }
                                else
                                {
                                    <span class="stock-badge bg-danger">Out of Stock</span>
                                }
                            </div>
                            <div class="card-body">
                                <div class="product-brand">@item.Brand</div>
                                <h5 class="product-name mt-1">@item.ProductName</h5>
                                <div class="product-size">@item.Size</div>
                                <div class="d-flex justify-content-between align-items-center mt-3">
                                    <div class="product-price">R @item.PriceRand,@(item.PriceCents.ToString("00"))</div>
                                </div>
                                <div class="button-container d-grid gap-2">
                                    <form asp-controller="Orders" asp-action="AddProductToOrder" method="post">
                                        <input type="hidden" name="productRowKey" value="@item.RowKey" />
                                        <input type="hidden" name="quantity" value="1" />
                                        <button type="submit" class="btn btn-add-to-cart" @(item.StockQuantity == 0 ? "disabled" : "")>
                                            <i class="fas fa-shopping-cart me-1"></i> Add to Cart
                                        </button>
                                    </form>
                                    <a asp-action="Details" asp-route-id="@item.RowKey" class="btn btn-view-details">
                                        <i class="fas fa-info-circle me-1"></i> View Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="no-products">
                <i class="fas fa-box-open fa-3x mb-3"></i>
                <h3>No Products Found</h3>
                <p>Get started by adding your first product!</p>
                <a asp-action="Create" class="btn btn-primary mt-2">
                    <i class="fas fa-plus-circle me-1"></i> Add Your First Product
                </a>
            </div>
        }
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

@* @{
    ViewData["Title"] = "Products";
}

<h1>Products</h1>

<p>
    <a asp-action="Create" class="btn btn-success">+ Add New Product</a>
</p>

<table class="table table-striped">
    <thead class="table-primary">
        <tr>
            <th>Product Info</th>
            <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Image</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <strong>@item.ProductName</strong><br>
                    <small class="text-muted">@item.Brand</small><br>
                    <small>@item.Size</small>
                </td>
                <td>@item.ProductCategory</td>
                <td>
                    <strong>R @item.PriceRand,@(item.PriceCents.ToString("00"))</strong>
                </td>
                <td>
                    <span class="@(item.StockQuantity > 0 ? "text-success" : "text-danger")">
                        @item.StockQuantity
                    </span>
                    @if (item.StockQuantity <= item.LowStockThreshold && item.StockQuantity > 0)
                    {
                        <br>
                
                        <small class="text-warning">Low Stock</small>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrEmpty(item.ImageURL))
                    {
                        <img src="@item.ImageURL" width="50" height="50" class="img-thumbnail" />
                    }
                    else
                    {
                        <span class="text-muted">No Image</span>
                    }
                </td>
                <td>
                    <div class="btn-group-vertical btn-group-sm" role="group">
                        <form asp-controller="Orders" asp-action="AddProductToOrder" method="post">
                            <input type="hidden" name="productRowKey" value="@item.RowKey" />
                            <input type="hidden" name="quantity" value="1" />
                            <button type="submit" class="btn btn-success btn-sm"
                                    title="Add to Order" @(item.StockQuantity == 0 ? "disabled" : "")>
                                + Add
                            </button>
                        </form>

                        <a asp-action="Edit" asp-route-id="@item.RowKey" class="btn btn-secondary btn-sm">Edit</a>
                        <a asp-action="Details" asp-route-id="@item.RowKey" class="btn btn-info btn-sm">Details</a>
                        <a asp-action="Delete" asp-route-id="@item.RowKey" class="btn btn-danger btn-sm">Delete</a>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table> *@

